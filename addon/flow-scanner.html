<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flow Scanner - Salesforce Inspector</title>
  <meta name="description" content="Comprehensive static analysis tool for Salesforce Flows">
  <link rel="stylesheet" href="button.css">
  <link rel="stylesheet" href="flow-scanner.css">
</head>
<body>
  <div id="flow-scanner-app" class="flow-scanner-app">
    <!-- Header -->
    <header class="flow-scanner-header" role="banner">
      <div class="header-title">
        <div class="scanner-icon" aria-hidden="true" role="img">üîç</div>
        <div class="header-text">
          <h1>Flow Scanner</h1>
          <p>Comprehensive static analysis for Salesforce Flows</p>
        </div>
      </div>
      <button 
        id="close-button" 
        class="close-btn" 
        title="Close Flow Scanner"
        aria-label="Close Flow Scanner"
        type="button">
        <span aria-hidden="true">√ó</span>
      </button>
    </header>
    
    <main class="flow-scanner-content" role="main">
      <!-- Flow Information Card -->
      <section class="flow-info-card" aria-labelledby="flow-info-title">
        <header class="card-header">
          <h2 id="flow-info-title">
            <span class="card-icon" aria-hidden="true">üìã</span>
            Current Flow
          </h2>
          <div class="flow-status-badge" id="flow-status-badge" role="status" aria-live="polite">
            <span id="flow-status-text">Loading...</span>
          </div>
        </header>
        
        <div class="flow-details-grid" role="region" aria-labelledby="flow-info-title">
          <div class="detail-group">
            <label for="flow-name">Flow Name</label>
            <span id="flow-name" class="flow-name" role="text">Loading...</span>
          </div>
          <div class="detail-group">
            <label for="flow-type">Type</label>
            <span id="flow-type" class="flow-type" role="text">Loading...</span>
          </div>
          <div class="detail-group">
            <label for="flow-api-version">API Version</label>
            <span id="flow-api-version" class="api-version" role="text">Loading...</span>
          </div>
          <div class="detail-group">
            <label for="flow-elements-count">Elements</label>
            <span id="flow-elements-count" class="elements-count" role="text">Loading...</span>
          </div>
        </div>
        
        <div class="flow-description-section">
          <label for="flow-description">Description</label>
          <div id="flow-description" class="flow-description" role="text">Loading...</div>
        </div>
        
        <div class="action-buttons" role="group" aria-label="Flow scanner actions">
          <button 
            id="scan-button" 
            class="btn btn-primary"
            type="button"
            aria-describedby="scan-button-desc">
            <span class="btn-icon" aria-hidden="true">üîç</span>
            <span>Scan Flow</span>
          </button>
          <div id="scan-button-desc" class="sr-only">Analyze the current flow for potential issues and improvements</div>
          
          <button 
            id="export-button" 
            class="btn btn-secondary" 
            disabled
            type="button"
            aria-describedby="export-button-desc">
            <span class="btn-icon" aria-hidden="true">üìä</span>
            <span>Export Results</span>
          </button>
          <div id="export-button-desc" class="sr-only">Export scan results to CSV format</div>
        </div>
      </section>
      
      <!-- Scan Results Section -->
      <section 
        class="scan-results-section" 
        id="results-section" 
        style="display: none;"
        aria-labelledby="results-title"
        aria-live="polite">
        <header class="section-header">
          <h2 id="results-title">
            <span class="card-icon" aria-hidden="true">üìä</span>
            Scan Results
          </h2>
          <div class="results-summary" id="results-summary" role="status" aria-live="polite">
            <div class="summary-stats" role="group" aria-label="Scan results summary">
              <div class="stat-item" role="group" aria-label="Total issues">
                <span class="stat-number" id="total-issues" aria-label="Total issues count">0</span>
                <span class="stat-label">Total Issues</span>
              </div>
              <div class="stat-item error" role="group" aria-label="Error issues">
                <span class="stat-number" id="error-count" aria-label="Error count">0</span>
                <span class="stat-label">Errors</span>
              </div>
              <div class="stat-item warning" role="group" aria-label="Warning issues">
                <span class="stat-number" id="warning-count" aria-label="Warning count">0</span>
                <span class="stat-label">Warnings</span>
              </div>
              <div class="stat-item info" role="group" aria-label="Information issues">
                <span class="stat-number" id="info-count" aria-label="Info count">0</span>
                <span class="stat-label">Info</span>
              </div>
            </div>
          </div>
        </header>
        
        <div id="results-container" class="results-container" role="region" aria-labelledby="results-title">
          <div class="empty-state" role="status" aria-live="polite">
            <div class="empty-icon" aria-hidden="true">üîç</div>
            <h3>Ready to Scan</h3>
            <p>Click "Scan Flow" to analyze the current flow for potential issues and improvements.</p>
          </div>
        </div>
      </section>
      
      <!-- Flow Elements Analysis -->
      <section 
        class="flow-elements-section" 
        id="elements-section" 
        style="display: none;"
        aria-labelledby="elements-title">
        <header class="section-header">
          <h2 id="elements-title">
            <span class="card-icon" aria-hidden="true">üß©</span>
            Flow Elements Analysis
          </h2>
        </header>
        <div id="elements-container" class="elements-container" role="region" aria-labelledby="elements-title">
          <div class="empty-state" role="status" aria-live="polite">
            <div class="empty-icon" aria-hidden="true">üß©</div>
            <h3>Elements Will Appear Here</h3>
            <p>After scanning, you'll see a detailed breakdown of all flow elements by type.</p>
          </div>
        </div>
      </section>
    </main>
    
    <!-- Loading Overlay -->
    <div 
      class="loading-overlay" 
      id="loading-overlay" 
      style="display: none;"
      role="dialog"
      aria-labelledby="loading-title"
      aria-describedby="loading-description"
      aria-modal="true">
      <div class="loading-card">
        <div class="loading-spinner" aria-hidden="true"></div>
        <h3 id="loading-title">Analyzing Flow...</h3>
        <p id="loading-description">Please wait while we scan your flow for potential issues.</p>
      </div>
    </div>
  </div>
  
  <!-- Screen reader only content -->
  <div class="sr-only" aria-live="polite" aria-atomic="true" id="sr-announcements"></div>
  
  <!-- Include Flow Scanner Core -->
  <script src="flow-scanner-core.js"></script>
  <script src="button.js"></script>
  <script type="module" src="flow-scanner.js"></script>
</body>
</html> 